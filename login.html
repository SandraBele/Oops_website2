<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wholesaler Login – Oops</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="site-header">
        <div class="container flex between align-center">
            <img src="oops_logo.png" alt="Oops logo" class="site-logo-img">
            <nav class="site-nav">
                <ul class="nav-list flex between align-center">
                    <li><a href="index.html#home">Home</a></li>
                    <li><a href="products.html">Products</a></li>
                    <li><a href="index.html#faq">FAQs</a></li>
                    <li><a href="index.html#contact">Contact</a></li>
                    <li><a href="signup.html" id="authLink">Sign Up</a></li>
                    <li><a href="cart.html">Cart (<span id="cartCount">0</span>)</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="auth-page">
        <div class="container">
            <div class="auth-hero">
                <h2 class="auth-title">Wholesaler Login</h2>
                <p class="auth-subtitle">Access your wholesale account to manage orders and view exclusive pricing.</p>
                
            </div>
            
            <form id="loginForm" class="enhanced-auth-form">
                <div class="form-group">
                    <label for="loginEmail" class="form-label">Email Address</label>
                    <div class="input-wrapper">
                        <input type="email" id="loginEmail" class="form-input" placeholder="Enter your email" required>
                        <div class="input-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                <polyline points="22,6 12,13 2,6"></polyline>
                            </svg>
                        </div>
                        <div class="validation-feedback"></div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="loginPassword" class="form-label">Password</label>
                    <div class="input-wrapper">
                        <input type="password" id="loginPassword" class="form-input" placeholder="Enter your password" required>
                        <div class="input-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                        </div>
                        <div class="validation-feedback"></div>
                    </div>
                </div>
                
                <button type="submit" class="enhanced-cta-button">
                    <span class="button-text">Log In</span>
                    <div class="button-loader">
                        <div class="spinner"></div>
                    </div>
                    <div class="button-success">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20,6 9,17 4,12"></polyline>
                        </svg>
                    </div>
                </button>
            </form>
            
            <div class="auth-footer">
                <p class="auth-link-text">Don't have an account? <a href="signup.html" class="auth-link">Register here</a></p>
                <div class="auth-benefits">
                    <div class="benefit-item">
                        <span class="benefit-icon">✓</span>
                        <span>Bulk discount pricing</span>
                    </div>
                    <div class="benefit-item">
                        <span class="benefit-icon">✓</span>
                        <span>Minimum 50 unit orders</span>
                    </div>
                    <div class="benefit-item">
                        <span class="benefit-icon">✓</span>
                        <span>Exclusive wholesale access</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            updateCartCount();
            
            // Enhanced login form handler with validation and animations
            const form = document.getElementById('loginForm');
            const emailInput = document.getElementById('loginEmail');
            const passwordInput = document.getElementById('loginPassword');
            const submitButton = form.querySelector('.enhanced-cta-button');
            
            // Real-time validation
            function validateEmail(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }
            
            function showValidation(input, isValid, message = '') {
                const wrapper = input.closest('.input-wrapper');
                const feedback = wrapper.querySelector('.validation-feedback');
                
                wrapper.classList.remove('valid', 'invalid');
                if (isValid) {
                    wrapper.classList.add('valid');
                } else if (message) {
                    wrapper.classList.add('invalid');
                    feedback.textContent = message;
                }
            }
            
            emailInput.addEventListener('blur', () => {
                const email = emailInput.value.trim();
                if (email) {
                    showValidation(emailInput, validateEmail(email), 'Please enter a valid email address');
                }
            });
            
            passwordInput.addEventListener('blur', () => {
                const password = passwordInput.value.trim();
                if (password) {
                    showValidation(passwordInput, password.length >= 6, 'Password must be at least 6 characters');
                }
            });
            
            // Enhanced form submission
            form.addEventListener('submit', async (event) => {
                event.preventDefault();
                
                const email = emailInput.value.trim();
                const password = passwordInput.value.trim();
                
                // Validate inputs
                const emailValid = validateEmail(email);
                const passwordValid = password.length >= 6;
                
                showValidation(emailInput, emailValid, 'Please enter a valid email address');
                showValidation(passwordInput, passwordValid, 'Password must be at least 6 characters');
                
                if (!emailValid || !passwordValid) {
                    return;
                }
                
                // Show loading state
                submitButton.classList.add('loading');
                
                // Simulate network delay for better UX
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                if (loginUser(email, password)) {
                    // Show success state
                    submitButton.classList.remove('loading');
                    submitButton.classList.add('success');
                    
                    // Update product page auth state
                    updateProductPageAuth();
                    
                    // Redirect after success animation
                    setTimeout(() => {
                        window.location.href = 'products.html';
                    }, 1500);
                } else {
                    // Show error state
                    submitButton.classList.remove('loading');
                    submitButton.classList.add('error');
                    
                    showValidation(emailInput, false, 'Invalid credentials');
                    showValidation(passwordInput, false, 'Please check your email and password');
                    
                    // Reset button state after delay
                    setTimeout(() => {
                        submitButton.classList.remove('error');
                    }, 3000);
                }
            });
        });
    </script>
</body>
</html>
